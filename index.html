<!DOCTYPE html>
<html lang="en" >
<head>
  <meta charset="UTF-8">
  <title>Slick + youtube video + Normal video.  </title>
  
<link rel="stylesheet" type="text/css" href="//cdn.jsdelivr.net/npm/slick-carousel@1.8.1/slick/slick.css"/>
<style>
    video{
        width: 100%;
    }
    body{
        display: flex;
    }
    body > div{
        width: 50%;
    }
    </style>
</head>
<body>
    <div class="one-time">
        
       <div style="text-align: center">
            <br/>
            <br/>
            <iframe data-id="61QSHrOuGEA" width="560" height="315" src="https://www.youtube.com/embed/61QSHrOuGEA?wmode=opaque&autohide=1&autoplay=0&enablejsapi=1" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>
            <!-- partial:index.partial.html -->
<!--<div class='ResponsiveYTPlayer'><iframe class="youtube-player" id="player" type="text/html" src="https://www.youtube.com/embed/6dmYxU9PtL8?wmode=opaque&autohide=1&autoplay=0&enablejsapi=1" frameborder="0" muted="muted"></iframe></div>-->
            
            <br/>
            <br/>
        </div>
        
         <div>
        <br/>
            <br/>
         <video class="slide-video slide-media" muted controls preload="metadata" poster="https://wallpaperaccess.com/full/1684789.jpg">
      <source src="/slick_video_youtube/samplevideo1.mp4" type="video/mp4" />
    </video>
            <br/>
            <br/>
        </div>
        <div style="text-align: center">
            <br/>
            <br/>
            <br/>
            <br/>
            <h1>One</h1>
            <br/>
            <br/>
            <br/>
            <br/>
        </div>
        <div style="text-align: center">
            <br/>
            <br/>
            <br/>
            <br/>
            <h1>Two</h1>
            <br/>
            <br/>
            <br/>
            <br/>
        </div>
        <div style="text-align: center">
            <br/>
            <br/>
            
            <iframe width="560" height="315" data-id="sO65YihyZac" src="https://www.youtube.com/embed/sO65YihyZac?wmode=opaque&autohide=1&autoplay=0&enablejsapi=1" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>
            <br/>
            <br/>
        </div>
        <div>
        <br/>
            <br/>
         <video class="slide-video slide-media" muted controls preload="metadata" poster="https://wallpaperaccess.com/full/1684789.jpg">
      <source src="/slick_video_youtube/samplevideo1.mp4" type="video/mp4" />
    </video>
            <br/>
            <br/>
        </div>
        <div style="text-align: center">
            <br/>
            <br/>
            <iframe data-id="61QSHrOuGEA" width="560" height="315" src="https://www.youtube.com/embed/61QSHrOuGEA?wmode=opaque&autohide=1&autoplay=0&enablejsapi=1" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>
            <!-- partial:index.partial.html -->
<!--<div class='ResponsiveYTPlayer'><iframe class="youtube-player" id="player" type="text/html" src="https://www.youtube.com/embed/6dmYxU9PtL8?wmode=opaque&autohide=1&autoplay=0&enablejsapi=1" frameborder="0" muted="muted"></iframe></div>-->
            
            <br/>
            <br/>
        </div>
        <div>
        <br/>
            <br/>
         <video class="slide-video slide-media" muted controls preload="metadata" poster="https://wallpaperaccess.com/full/1684789.jpg">
      <source src="/slick_video_youtube/samplevideo1.mp4" type="video/mp4" />
    </video>
            <br/>
            <br/>
        </div>
        <div style="text-align: center">
            <br/>
            <br/>
            <br/>
            <br/>
            <h1>Four</h1>
            <br/>
            <br/>
            <br/>
            <br/>
        </div>
        
       
    </div>
    <div class="two-time" style="">
         <div style="text-align: center">
            <br/>
            <br/>
            <iframe data-id="61QSHrOuGEA" width="560" height="315" src="https://www.youtube.com/embed/61QSHrOuGEA?wmode=opaque&autohide=1&autoplay=0&enablejsapi=1" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>
            <!-- partial:index.partial.html -->
<!--<div class='ResponsiveYTPlayer'><iframe class="youtube-player" id="player" type="text/html" src="https://www.youtube.com/embed/6dmYxU9PtL8?wmode=opaque&autohide=1&autoplay=0&enablejsapi=1" frameborder="0" muted="muted"></iframe></div>-->
            
            <br/>
            <br/>
        </div>
        
         <div>
        <br/>
            <br/>
         <video class="slide-video slide-media" muted controls preload="metadata" poster="https://wallpaperaccess.com/full/1684789.jpg">
      <source src="/slick_video_youtube/samplevideo1.mp4" type="video/mp4" />
    </video>
            <br/>
            <br/>
        </div>
        <div style="text-align: center">
            <br/>
            <br/>
            <br/>
            <br/>
            <h1>One</h1>
            <br/>
            <br/>
            <br/>
            <br/>
        </div>
        <div style="text-align: center">
            <br/>
            <br/>
            <br/>
            <br/>
            <h1>Two</h1>
            <br/>
            <br/>
            <br/>
            <br/>
        </div>
        <div style="text-align: center">
            <br/>
            <br/>
            
            <iframe width="560" height="315" data-id="sO65YihyZac" src="https://www.youtube.com/embed/sO65YihyZac?wmode=opaque&autohide=1&autoplay=0&enablejsapi=1" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>
            <br/>
            <br/>
        </div>
        <div>
        <br/>
            <br/>
         <video class="slide-video slide-media" muted controls preload="metadata" poster="https://wallpaperaccess.com/full/1684789.jpg">
      <source src="/slick_video_youtube/samplevideo1.mp4" type="video/mp4" />
    </video>
            <br/>
            <br/>
        </div>
        <div style="text-align: center">
            <br/>
            <br/>
            <iframe data-id="61QSHrOuGEA" width="560" height="315" src="https://www.youtube.com/embed/61QSHrOuGEA?wmode=opaque&autohide=1&autoplay=0&enablejsapi=1" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>
            <!-- partial:index.partial.html -->
<!--<div class='ResponsiveYTPlayer'><iframe class="youtube-player" id="player" type="text/html" src="https://www.youtube.com/embed/6dmYxU9PtL8?wmode=opaque&autohide=1&autoplay=0&enablejsapi=1" frameborder="0" muted="muted"></iframe></div>-->
            
            <br/>
            <br/>
        </div>
        <div>
        <br/>
            <br/>
         <video class="slide-video slide-media" muted controls preload="metadata" poster="https://wallpaperaccess.com/full/1684789.jpg">
      <source src="/slick_video_youtube/samplevideo1.mp4" type="video/mp4" />
    </video>
            <br/>
            <br/>
        </div>
        <div style="text-align: center">
            <br/>
            <br/>
            <br/>
            <br/>
            <h1>Four</h1>
            <br/>
            <br/>
            <br/>
            <br/>
        </div>
        
       
      
        
    </div>
    
<!--    style="display: none"-->


<!-- partial -->
<!--    <script type="text/javascript" src="https://www.youtube.com/player_api"></script>-->
    <script src="https://code.jquery.com/jquery-3.6.0.min.js" integrity="sha256-/xUj+3OJU5yExlq6GSYGSHk7tPXikynS7ogEvDej/m4=" crossorigin="anonymous"></script>
    <script type="text/javascript" src="//cdn.jsdelivr.net/npm/slick-carousel@1.8.1/slick/slick.min.js"></script>

  <script  src="./script.js"></script>
<script>
    $(document).ready(function(){
//   var tag = document.createElement('script');
//      tag.src = "https://www.youtube.com/player_api";
//      var firstScriptTag = document.getElementsByTagName('script')[0];
//      firstScriptTag.parentNode.insertBefore(tag, firstScriptTag);
      function loadScript() {
          
                        if (typeof(YT) == 'undefined' || typeof(YT.Player) == 'undefined') {
                            
                            var tag = document.createElement('script');
                            tag.src = "https://www.youtube.com/iframe_api";
                            var firstScriptTag = document.getElementsByTagName('script')[0];
                            firstScriptTag.parentNode.insertBefore(tag, firstScriptTag);
                        }
                    }
$(function () {
    
  loadScript();
})
        function loadPlayer() {
                            window.onYouTubePlayerAPIReady = function() {
                                onYouTubePlayer();
                                onYouTubePlayerTwo();
                            };
                    }
        loadPlayer();
        function onYouTubePlayer(){
            var slider = $(".one-time"); 
        
        slider.slick({
  dots: false,
  infinite: true,
  speed: 500,
autoplaySpeed: 1000,
  slidesToShow: 1,
  adaptiveHeight: true,
            autoplay: true
});
   
 var prevSlide = 0,
     player,
     playing = false,
     playerRef,
    youtubeDynamicIdInt = 0;
        
 
function slickInit(){
    let target = slider;
let currentSlide = target.slick('slickCurrentSlide');
    let currentMode = checkVideoYoutubeNone(target, currentSlide);
      if(currentMode === "video"){
//          target.slick("slickPause");
          let currentVideo = target.find('[data-slick-index="'+currentSlide+'"] video');
          playVideo(target, currentVideo)
      }
    else if(currentMode === "youtube"){
          playYoutube(target, currentSlide)  
         
    }
    else{
        target.slick("slickPlay");
    }
};
         
    
        slickInit();
    // On before slide change
slider.on('afterChange', function(event, slick, currentSlide){
    let target = $(this);
    prevSlider(target);
    let currentMode = checkVideoYoutubeNone(target, currentSlide);
    if(currentMode === "video"){
        let currentVideo = target.find('[data-slick-index="'+currentSlide+'"] video');
        playVideo(target, currentVideo)
    }
    else if(currentMode === "youtube"){
        playYoutube(target, currentSlide)
    }
    prevSlide = currentSlide;
});
     
        function prevSlider(target){
            let prevVideo = target.find('[data-slick-index="'+prevSlide+'"] video');
            let prevYoutube = target.find('[data-slick-index="'+prevSlide+'"] iframe');
            if(prevVideo.length === 1){
                prevVideo.get(0).pause();
                prevVideo.get(0).currentTime = 0;
            }
            else if(prevYoutube.length === 1){
                if(playerRef != null){
                     postMessageToPlayer(playerRef, {
                        "event": "command",
                        "func": "stopVideo"
                    });
                }                
            }
        }
//        Play  video tag
        function playVideo(target, videoTarget){
             videoTarget.get(0).play();
            videoTarget.on('ended',function(){
              target.slick("slickPlay");
            });
        }
// Play Youtube video        
        function playYoutube(target, currentSlide){
            
            let youtubeDynamicId = "dynamicId" + youtubeDynamicIdInt;
            let frameId = target.find('[data-slick-index="'+currentSlide+'"] iframe').attr("id", youtubeDynamicId);
            let videoId = target.find('[data-slick-index="'+currentSlide+'"] iframe').attr("data-id");
            youtubeDynamicIdInt++;
            playerRef = $("#"+youtubeDynamicId).get(0);
            
            player = new YT.Player(youtubeDynamicId,{
                events:{
                    'onReady': onPlayerReady,
                    'onStateChange': onPlayerStateChange}
                })
            postMessageToPlayer(playerRef, {
                "event": "command",
                "func": "mute"
            }); 
    
            postMessageToPlayer(playerRef, {
                "event": "command",
                "func": "playVideo"
            });
         
            function onPlayerReady(event) {
                event.target.mute();
                event.target.playVideo();
            }
            function onPlayerStateChange(event){
                if(event.data == 1 && !playing){
                    playing = true;
                }
                else if(event.data == 2 || event.data == 0){
             
                    target.slick("slickPlay");
                    postMessageToPlayer(playerRef, {
                        "event": "command",
                        "func": "stopVideo"
                    });
                    player = null;
                    playing = false;
                    playerRef = null;
                }
            }
              
               
        }   
             function postMessageToPlayer(player, command){
                    if (player == null || command == null) return;
                    player.contentWindow.postMessage(JSON.stringify(command), "*");
                    } 
        //To check current video mode
       function checkVideoYoutubeNone(target, CurrentSlide){
           let v = target.find('[data-slick-index="'+CurrentSlide+'"] video').length,
               y = target.find('[data-slick-index="'+CurrentSlide+'"] iframe').length;
           if(v === 1){
               target.slick("slickPause");
               return "video"
           }
           else if(y === 1){
               target.slick("slickPause");
               return "youtube"
           }
           else{
               target.slick("slickPlay");
               return "none"
           }
           
       }
    
        } 
        function onYouTubePlayerTwo(){
            var sliderTwo = $(".two-time");        
        
        sliderTwo.slick({
              dots: false,
              infinite: true,
              speed: 500,
            autoplaySpeed: 1000,
              slidesToShow: 1,
              adaptiveHeight: true,
                        autoplay: true
            });
                    
   
 var prevSlideTwo = 0,
     playerTwo,
     playingTwo = false,
     playerRefTwo,
    youtubeDynamicIdIntTwo = 0;
        
 
function slickInitTwo(){
    let target = sliderTwo;
let currentSlideTwo = target.slick('slickCurrentSlide');
    let currentModeTwo = checkVideoYoutubeNone(target, currentSlideTwo);
      if(currentModeTwo === "video"){
//          target.slick("slickPause");
          let currentVideoTwo = target.find('[data-slick-index="'+currentSlide+'"] video');
          playVideoTwo(target, currentVideo)
      }
    else if(currentModeTwo === "youtube"){
          playYoutubeTwo(target, currentSlideTwo)  
         
    }
    else{
        target.slick("slickPlay");
    }
};
         
    
        slickInitTwo();
    // On before slide change
sliderTwo.on('afterChange', function(event, slick, currentSlide){
    let target = $(this);
    prevSliderTwo(target);
    let currentModeTwo = checkVideoYoutubeNone(target, currentSlide);
    if(currentModeTwo === "video"){
        let currentVideo = target.find('[data-slick-index="'+currentSlide+'"] video');
        playVideoTwo(target, currentVideo)
    }
    else if(currentModeTwo === "youtube"){
        playYoutubeTwo(target, currentSlide)
    }
    prevSlideTwo = currentSlide;
});
     
        function prevSliderTwo(target){
            let prevVideo = target.find('[data-slick-index="'+prevSlideTwo+'"] video');
            let prevYoutube = target.find('[data-slick-index="'+prevSlideTwo+'"] iframe');
            if(prevVideo.length === 1){
                prevVideo.get(0).pause();
                prevVideo.get(0).currentTime = 0;
            }
            else if(prevYoutube.length === 1){
                console.log("Youtube");
                console.log(playerRefTwo);
                if(playerRefTwo != null){
                
                     postMessageToPlayerTwo(playerRefTwo, {
                        "event": "command",
                        "func": "stopVideo"
                    });
                }                
            }
        }
//        Play  video tag
        function playVideoTwo(target, videoTarget){
             videoTarget.get(0).play();
            videoTarget.on('ended',function(){
              target.slick("slickPlay");
            });
        }
// Play Youtube video        
        function playYoutubeTwo(target, currentSlide){
            let youtubeDynamicIdTwo = "dynamicIdTwo" + youtubeDynamicIdIntTwo;
            
            let frameId = target.find('[data-slick-index="'+currentSlide+'"] iframe').attr("id", youtubeDynamicIdTwo);
            let videoId = target.find('[data-slick-index="'+currentSlide+'"] iframe').attr("data-id");
            youtubeDynamicIdIntTwo++;
            playerRefTwo = $("#"+youtubeDynamicIdTwo).get(0);
            
            playerTwo = new YT.Player(youtubeDynamicIdTwo,{
                events:{
                    'onReady': onPlayerReadyTwo,
                    'onStateChange': onPlayerStateChangeTwo}
                })
            postMessageToPlayerTwo(playerRefTwo, {
                "event": "command",
                "func": "mute"
            }); 
    
            postMessageToPlayerTwo(playerRefTwo, {
                "event": "command",
                "func": "playVideo"
            });
         
            function onPlayerReadyTwo(event) {
                event.target.mute();
                event.target.playVideo();
            }
            function onPlayerStateChangeTwo(event){
                if(event.data == 1 && !playingTwo){
                    playingTwo = true;
                }
                else if(event.data == 2 || event.data == 0){
                    target.slick("slickPlay");
                    postMessageToPlayerTwo(playerRefTwo, {
                        "event": "command",
                        "func": "stopVideo"
                    });
                    playerTwo = null;
                    playingTwo = false;
                    playerRefTwo = null;
                }
            }
               
        }       
            function postMessageToPlayerTwo(player, command){
                    if (player == null || command == null) return;
                    player.contentWindow.postMessage(JSON.stringify(command), "*");
                    } 
        //To check current video mode
       function checkVideoYoutubeNone(target, CurrentSlide){
           let v = target.find('[data-slick-index="'+CurrentSlide+'"] video').length,
               y = target.find('[data-slick-index="'+CurrentSlide+'"] iframe').length;
           if(v === 1){
               target.slick("slickPause");
               return "video"
           }
           else if(y === 1){
               target.slick("slickPause");
               return "youtube"
           }
           else{
               target.slick("slickPlay");
               return "none"
           }
           
       }
    
        }
         });
    </script>
</body>
</html>
